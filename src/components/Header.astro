---
const { lang = "en" } = Astro.props;
import { t } from "../i18n";
---

<header
  class="text-[#94A3B8] items-center bg-gray-900 shadow-md"
  style="position: fixed;
        top: 0;
        backdrop-filter: blur(10px);
        opacity: 0.95;
        width: 100%;
        z-index: 1000">
  <div class="container mx-auto flex p-5 items-center">
    <!-- Logo -->
    <a
      class="flex title-font font-medium items-center text-white mb-4 md:mb-0"
      href="#hero-banner">
      <img
        src="src/assets/images/logo-image.png"
        alt="Logo"
        class="w-10 h-10 object-contain"
      />
      <span class="ml-3 text-xl">PrayTime</span>
    </a>

    <!-- Botón hamburguesa -->
    <button id="menu-toggle" class="ml-auto md:hidden">
      <svg
        class="w-6 h-6"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        viewBox="0 0 24 24">
        <path d="M3 5h18M3 12h18M3 19h18"></path>
      </svg>
    </button>

    <!-- Menú desktop -->
    <nav class="hidden md:ml-auto md:mr-auto space-x-5 md:flex">
      <a href="#features" class="mr-5 hover:text-white font-medium"
        >{t(lang, "header.features")}</a>
      <a href="#about-praytime" class="mr-5 hover:text-white font-medium"
        >{t(lang, "header.about")}</a>
      <a href="#download" class="mr-5 hover:text-white font-medium"
        >{t(lang, "header.download")}</a>
    </nav>

    <div class="flex items-center gap-3">
      <div
        style="width: 2px; height: 30px; border: 1.5px solid #1E293B; border-radius: 100px;">
      </div>
      <!-- Select de Idiomas -->
      <div class="relative" id="lang-dropdown">
        <!-- Botón -->
        <button
          id="lang-button"
          type="button" class="flex items-center gap-2 px-3 py-2 rounded-md bg-gray-900 hover:bg-gray-800 text-gray-300"
          aria-expanded="false">
          <!-- Icono translate -->
          <span class="text-xl">
            <img src="src/assets/images/icons/translate_icon.svg" alt="Translate Icon" class="w-5 h-5" />
          </span>

          <!-- Idioma actual -->
          <span class="font-medium uppercase">{lang}</span>

          <!-- Flecha -->
          <svg
            class="w-4 h-4 ml-1"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            viewBox="0 0 24 24">
            <path d="M19 9l-7 7-7-7"></path>
          </svg>
        </button>

        <!-- Dropdown -->
        <ul
          id="lang-menu"
          class="absolute right-0 mt-2 w-20 hidden bg-gray-900 border border-gray-700 rounded-md shadow-lg z-50">
          <li>
            <button
              data-lang="en"
              class="w-full px-3 py-2 text-left text-gray-300 hover:bg-gray-800 uppercase">
              EN
            </button>
          </li>
          <li>
            <button
              data-lang="es"
              class="w-full px-3 py-2 text-left text-gray-300 hover:bg-gray-800 uppercase">
              ES
            </button>
          </li>
        </ul>
      </div>
      <div
        style="width: 2px; height: 30px; border: 1.5px solid #1E293B; border-radius: 100px;"
      >
      </div>
      <div class="hidden md:flex items-center gap-4">
        <a
          href="https://www.facebook.com/profile.php?id=100068253095580"
          target="_blank"
        >
          <img
            class="w-3"
            src="src/assets/images/icons/facebook_icon.svg"
            alt="Facebook Icon"
          />
        </a>
        <a href="https://www.instagram.com/digital.faith_/" target="_blank">
          <img
            class="w-5"
            src="src/assets/images/icons/instagram_icon.svg"
            alt="Instagram Icon"
          />
        </a>
        <a href="https://www.tiktok.com/@digifaith" target="_blank">
          <img
            class="w-5"
            src="src/assets/images/icons/tiktok_icon.svg"
            alt="TikTok Icon"
          />
        </a>
      </div>
    </div>
  </div>

  <!-- Menú mobile -->
  <nav
    id="mobile-menu"
    class="hidden md:hidden flex flex-col p-4 space-y-3 bg-gray-900"
  >
    <a class="mr-5 hover:text-white font-medium">Características</a>
    <a class="mr-5 hover:text-white font-medium">Acerca de</a>
    <a class="mr-5 hover:text-white font-medium">Descargar</a>
  </nav>
</header>

<script is:inline>
  // Toggle menú mobile
  const toggle = document.getElementById("menu-toggle");
  const menu = document.getElementById("mobile-menu");

  toggle?.addEventListener("click", () => {
    menu?.classList.toggle("hidden");
  });

  // Dropdown idioma
  const btn = document.getElementById("lang-button");
  const dropdown = document.getElementById("lang-menu");

  btn?.addEventListener("click", (e) => {
    e.stopPropagation();
    dropdown?.classList.toggle("hidden");
  });

  // Cambio de idioma
  dropdown?.querySelectorAll("[data-lang]").forEach((item) => {
    item.addEventListener("click", () => {
      const lang = item.dataset.lang;
      window.location.href = `/${lang}`;
    });
  });

  // Cerrar al hacer click fuera
  document.addEventListener("click", () => {
    dropdown?.classList.add("hidden");
  });
</script>

